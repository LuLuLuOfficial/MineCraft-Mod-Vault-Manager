<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic POST Request Sender</title>
  </head>
  <body>
    <h2>Dynamic POST Request Sender</h2>

    <form id="postForm">
      <label for="url">Request URL:</label><br />
      <input
        type="text"
        id="url"
        name="url"
        placeholder="Enter POST URL"
        required
      /><br /><br />

      <label for="data">POST Data (JSON format):</label><br />
      <textarea
        id="data"
        name="data"
        rows="4"
        cols="50"
        placeholder='{"key1": "value1", "key2": "value2"}'
        required
      ></textarea
      ><br /><br />

      <button type="button" onclick="sendPostRequest()">
        Send POST Request
      </button>
    </form>

    <p id="response"></p>

    <script>
      function sendPostRequest() {
        const url = document.getElementById("url").value;
        const data = document.getElementById("data").value;

        try {
          // Parse JSON data from the input
          const parsedData = JSON.parse(data);

          // Send POST request using Fetch API
          fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(parsedData),
          })
            .then((response) => {
              // Check if the response is successful
              if (!response.ok) {
                throw new Error(
                  "Request failed with status " + response.status
                );
              }
              return response.text(); // Get the response as text to handle non-JSON responses
            })
            .then((text) => {
              try {
                // Try to parse the response text as JSON
                const responseData = JSON.parse(text);
                document.getElementById(
                  "response"
                ).textContent = `Response: ${JSON.stringify(responseData)}`;
              } catch (e) {
                // If response is not in JSON format, display raw response
                document.getElementById(
                  "response"
                ).textContent = `Response (non-JSON): ${text}`;
              }
            })
            .catch((error) => {
              // Handle any errors (network or JSON parsing issues)
              document.getElementById(
                "response"
              ).textContent = `Error: ${error.message}`;
            });
        } catch (e) {
          document.getElementById("response").textContent =
            "Invalid JSON data format.";
        }
      }
    </script>
  </body>
</html>
